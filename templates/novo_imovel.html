{% extends "template.html" %}
{% block conteudo %}
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
  <script src="{{url_for('static', filename='jquery-3.6.0.min.js') }}"></script>
  <script src="{{url_for('static', filename='jquery.mask.js') }}"></script>
  <script>
   $(document).ready(function (){
      $('#valor').mask('000.000.000.000.000', {reverse: true});
      $('#porcentagem').mask('##00.0%', {reverse: true});
      $('#area').mask('##000m', {reverse: true});
  });
  </script>
      <div class="modal fade" id="BairroModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <form class="row g-3 needs-validation" action="/novo_bairro" method="post" novalidate>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Criar bairro</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <input type="hidden" name="previous" value="/novo_imovel">
          <div class="form-group">
            <label for="cidade_bairro">Cidade</label>
            <select class="form-select" id="cidade_bairro" name="cidade_bairro" required>
                <option value="" selected>Selecione a tipo</option>
                    {% for cidade in cidades %}
                        <option value="{{ cidade._id_cidade }}">{{ cidade._cidade_nome}}</option>
                    {% endfor %}
            </select><div class="invalid-feedback">
              Por favor insira uma cidade.
              </div>
          </div>
          <div class="form-group">
            <label for="bairro">Bairro</label>
            <input type="text" id="bairro" name="bairro" class="form-control" required>
              <div class="invalid-feedback">
              Por favor insira um bairro.
              </div>
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="submit" class="btn btn-dark btn-salvar">Salvar</button>
      </div>
    </div>
  </div></form>
</div>
      <div class="modal fade" id="CidadeModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <form class="row g-3 needs-validation" action="/nova_cidade" method="post" novalidate>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="CidadeModalLabel">Criar cidade</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <input type="hidden" name="previous" value="/novo_imovel">
          <div class="form-group">
            <label for="cidade">Cidade</label>
            <input type="text" id="cidade" name="cidade" class="form-control" required>
              <div class="invalid-feedback">
              Por favor insira uma cidade.
              </div>
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="submit" class="btn btn-dark btn-salvar">Salvar</button>
      </div>
    </div>
  </div></form>
</div>
<h1>Cadastro de terreno</h1>

<br>
    <fieldset>
    <nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <a class="nav-link active" id="nav-corretor-tab" data-bs-toggle="tab" href="#nav-corretor" role="tab" aria-controls="nav-corretor" aria-selected="true">Cadastro do Imovel</a>
    <a class="nav-link" id="nav-imovel-tab" data-bs-toggle="tab" href="#nav-imovel" role="tab" aria-controls="nav-imovel" aria-selected="false">Descrição Imovel</a>
    <a class="nav-link" id="nav-prop-tab" data-bs-toggle="tab" href="#nav-prop" role="tab" aria-controls="nav-prop" aria-selected="false">Proprietario e Corretor</a>
  </div>
</nav>
<div class="tab-content" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-corretor" role="tabpanel" aria-labelledby="nav-corretor-tab">
      <br>
          
<div class="input-group">
            <label class="input-group-text" for="cidades">Cidade</label>
            <select class="form-select" id="cidades" name="cidades" required>
                <option value="" selected>Selecione a cidade</option>
                    {% for cidade in cidades %}
                        <option value="{{ cidade._id_cidade }}">{{ cidade._cidade_nome}}</option>
                    {% endfor %}
            </select>
                              <div class="invalid-feedback">
              Por favor insira uma cidade.
              </div>

              <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#CidadeModal"><i><img
                      src="../static/img/icon/plus.svg" alt=""></i> Criar cidade </button>

          </div>
      <br>
<div class="input-group">
            <label class="input-group-text" for="bairros">Bairros</label>
            <select class="form-select" id="bairros" name="bairros" required>
                <option value="" selected>Selecione o bairro</option>
                    {% for bairro in bairros %}

                        <option data-cid="{{bairro._id_cid}}" value="{{ bairro._id_bairro }}">{{bairro._bairro_nome}} / {{bairro._bairro_cid_nome}}</option>
                    {% endfor %}
            </select>
                              <div class="invalid-feedback">
              Por favor insira um bairro.
              </div>

              <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#BairroModal"><i><img
                      src="../static/img/icon/plus.svg" alt=""></i> Criar bairro </button>

          </div>
      <br>

        <div class="form-group">
            <label for="endereco">Endereço</label>
            <input type="text" id="endereco" name="endereco" class="form-control" required>
            <div class="invalid-feedback">
              Por favor insira um endereco.
              </div>
          </div>
                
  </div>

  <div class="tab-pane fade" id="nav-imovel" role="tabpanel" aria-labelledby="nav-imovel-tab">
      <br>
        <div class="form-group">
            <label for="valor">Valor</label>
            <input type="text" id="valor" name="valor" class="form-control" required>
                        <div class="invalid-feedback">
              Por favor insira um valor.
              </div>
          </div>
      <br>
        <div class="form-group">
            <label for="porcentagem">Porcentagem</label>
            <input type="text" id="porcentagem" name="porcentagem" class="form-control" required>
                        <div class="invalid-feedback">
              Por favor insira uma porcentagem.
              </div>
          </div>
  </div>
  <div class="tab-pane fade" id="nav-prop" role="tabpanel" aria-labelledby="nav-prop-tab">
      <br>
        <div class="mb-3">
            <select class="js-example-responsive" style="width: 50%" name="proprietario" id="proprietario" required>
                    <option value="" selected>Selecione o proprietario</option>
                    {% for proprietario in proprietarios %}
                        <option value="{{ proprietario._id }}">{{ proprietario._nome }}</option>
                    {% endfor %}
            </select>
            <label for="proprietario">Proprietario</label>
                        <div class="invalid-feedback">
              Por favor insira um proprietario.
              </div>
          </div>
      <br>
        <div class="mb-3">
            <select class="js-example-responsive" style="width: 50%" name="corretor" id="corretor" required>
                <option value="" selected>Selecione o Corretor</option>
                {% for corretor in corretores %}
                        <option value="{{ corretor._id_corr }}">{{ corretor._nome }}</option>
                {% endfor %}
            </select>
            <label for="corretor">Corretor</label>
                        <div class="invalid-feedback">
              Por favor insira um corretor.
              </div>
        </div>
   <script>
        $(document).ready(function() {
            $('#corretor').select2({
                width: 'resolve'
            });
        });

        $(document).ready(function() {
            $('#proprietario').select2({
                width: 'resolve'
            });
        });
    </script>


  </div>
</div>
        <br>
          <button type="submit" class="btn btn-dark btn-salvar">Salvar</button>
        <a href="{{url_for('index')}}"><button type="button" class="btn btn-danger">Voltar</button></a>

    </fieldset>
</form>

    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
{% endblock %}